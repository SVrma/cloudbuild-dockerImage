steps:
  # - name: 'gcr.io/cloud-builders/docker'
  #   args: ['build', '-t', 'gcr.io/basic-tube-373302/apacheimage-release', '.']

  # - name: 'gcr.io/cloud-builders/docker'   
  #   args: ['push', 'gcr.io/basic-tube-373302/apacheimage-release'] 

  # - name: 'gcr.io/cloud-builders/gcloud'
  #   args: ['run', 'deploy', 'shailendra-release', '--image','gcr.io/basic-tube-373302/apacheimage-release','--port','80', '--region','asia-northeast1','--platform','managed', '--allow-unauthenticated' ]  

  # - name: 'gcr.io/cloud-builders/git'
  #   args: ['checkout', 'develop']

  - name: 'gcr.io/cloud-builders/git'
    args: ['branch'] 

  # - name: 'gcr.io/cloud-builders/git'
  #   args: ['checkout','develop']

  # - name: 'gcr.io/cloud-builders/git'
  #   args: [ 'tag ','v0.1'] 

  # - name: 'gcr.io/cloud-builders/git'
  #   args: ['config','user.name',] 
   

  - name: 'gcr.io/cloud-builders/git'
    args: ['config','user.name','SVrma'] 

  # - name: 'gcr.io/cloud-builders/git'
  #   args: ['config','user.password','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']   
  
  # - name: 'gcr.io/cloud-builders/git'
  #   args: ['push','https://github.com/SVrma/cloudbuild-dockerImage.git']  

  - name: gcr.io/cloud-builders/git
    entrypoint: 'bash'
    args:
    - '-c'
    - |
      echo "Cloning repo ..."
      git clone --depth 1 git@github.com:SVrma/cloudbuild-dockerImage
      cd cloudbuild-dockerImage
      git checkout main
      git config --global user.name SVrma
      git config --global user.email mxx.verma@gmail.com
      git add -A
      git commit -m "Updated with build ${BUILD_ID} from ${REPO_NAME} commit ${COMMIT_SHA}"
      git tag v1.0.1
      echo "tag generated"
      git push origin master
      git push origin --tags
    
  
    
       
    